# goreleaser.yaml — GoReleaser ≥ v2.10.x
version: 2

project_name: ai-chat-cli

before:
  hooks:
    - go mod tidy -e -v

builds:
  - id: linux_amd64
    main: ./cmd/ai-chat
    goos:  [linux]
    goarch: [amd64]
    env:   [CGO_ENABLED=0]
    ldflags: >-
      -s -w
      -X main.version={{ .Version }}
      -X main.commit={{ .Commit }}
      -X main.date={{ .Date }}

archives:
  - id: default
    ids:     [linux_amd64]           # replaces deprecated `builds`
    formats: [tar.gz]                # replaces deprecated single `format`
    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
    files:
      - LICENSE*
      - README.md

checksum:
  name_template: checksums.txt
  algorithm: sha256

release:
  draft: false
  prerelease: false
  github:
    owner: jalsarraf0
    name: ai-chat-cli

snapshot:
  version_template: "{{ .Tag }}-next-{{ .Commit }}"   # replaces deprecated `name_template`
